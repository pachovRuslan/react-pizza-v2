{"ast":null,"code":"// from swr\nimport canUseDom from '../../../utils/canUseDom';\nimport isDocumentVisible from './isDocumentVisible';\nimport isOnline from './isOnline';\nvar listeners = [];\n\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    var index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\n\nif (canUseDom()) {\n  var revalidate = function revalidate() {\n    if (!isDocumentVisible() || !isOnline()) return;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false);\n}\n\nexport default subscribe;","map":{"version":3,"names":["canUseDom","isDocumentVisible","isOnline","listeners","subscribe","listener","push","unsubscribe","index","indexOf","splice","revalidate","i","length","window","addEventListener"],"sources":["D:/.vscode/react-pizza-v2/node_modules/ahooks/es/useRequest/src/utils/subscribeFocus.js"],"sourcesContent":["// from swr\nimport canUseDom from '../../../utils/canUseDom';\nimport isDocumentVisible from './isDocumentVisible';\nimport isOnline from './isOnline';\nvar listeners = [];\n\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    var index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\n\nif (canUseDom()) {\n  var revalidate = function revalidate() {\n    if (!isDocumentVisible() || !isOnline()) return;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false);\n}\n\nexport default subscribe;"],"mappings":"AAAA;AACA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,IAAIC,SAAS,GAAG,EAAhB;;AAEA,SAASC,SAAT,CAAmBC,QAAnB,EAA6B;EAC3BF,SAAS,CAACG,IAAV,CAAeD,QAAf;EACA,OAAO,SAASE,WAAT,GAAuB;IAC5B,IAAIC,KAAK,GAAGL,SAAS,CAACM,OAAV,CAAkBJ,QAAlB,CAAZ;IACAF,SAAS,CAACO,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;EACD,CAHD;AAID;;AAED,IAAIR,SAAS,EAAb,EAAiB;EACf,IAAIW,UAAU,GAAG,SAASA,UAAT,GAAsB;IACrC,IAAI,CAACV,iBAAiB,EAAlB,IAAwB,CAACC,QAAQ,EAArC,EAAyC;;IAEzC,KAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,SAAS,CAACU,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;MACzC,IAAIP,QAAQ,GAAGF,SAAS,CAACS,CAAD,CAAxB;MACAP,QAAQ;IACT;EACF,CAPD;;EASAS,MAAM,CAACC,gBAAP,CAAwB,kBAAxB,EAA4CJ,UAA5C,EAAwD,KAAxD;EACAG,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCJ,UAAjC,EAA6C,KAA7C;AACD;;AAED,eAAeP,SAAf"},"metadata":{},"sourceType":"module"}