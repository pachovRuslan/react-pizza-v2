{"ast":null,"code":"import _slicedToArray from\"D:/.vscode/react-pizza-v2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{addItem}from'../../redux/Slices/cart/slice';import{selectCartItemById}from'../../redux/Slices/cart/selectors';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var typeName=['тонкое','традиционное'];var PizzaBlock=function PizzaBlock(_ref){var id=_ref.id,price=_ref.price,title=_ref.title,imageUrl=_ref.imageUrl,types=_ref.types,sizes=_ref.sizes;var dispatch=useDispatch();var cartItem=useSelector(selectCartItemById(id));var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),activeType=_React$useState2[0],setActiveType=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),activeSize=_React$useState4[0],setActiveSize=_React$useState4[1];var addedCount=cartItem?cartItem.count:0;var onClickAdd=function onClickAdd(){var item={id:id,price:price,title:title,imageUrl:imageUrl,types:typeName[activeType],sizes:activeSize,count:0};dispatch(addItem(item));};return/*#__PURE__*/_jsx(\"div\",{className:\"pizza-block-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/pizza/\".concat(id),children:[/*#__PURE__*/_jsx(\"img\",{className:\"pizza-block__image\",src:imageUrl,alt:\"Pizza\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"pizza-block__title\",children:title})]},id),/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block__selector\",children:[/*#__PURE__*/_jsx(\"ul\",{children:types.map(function(typeId,i){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setActiveType(typeId);},className:activeType===typeId?'active':'',children:typeName[typeId]},i);})}),/*#__PURE__*/_jsx(\"ul\",{children:sizes.map(function(size,i){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return setActiveSize(size);},className:activeSize===size?'active':'',children:[size,\" \\u0441\\u043C.\"]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block__price\",children:[\"\\u043E\\u0442 \",price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onClickAdd,className:\"button button--outline button--add\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 12 12\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z\",fill:\"white\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),addedCount>0&&/*#__PURE__*/_jsx(\"i\",{children:addedCount})]})]})]})});};export default PizzaBlock;","map":{"version":3,"names":["React","Link","useDispatch","useSelector","addItem","selectCartItemById","typeName","PizzaBlock","id","price","title","imageUrl","types","sizes","dispatch","cartItem","useState","activeType","setActiveType","activeSize","setActiveSize","addedCount","count","onClickAdd","item","map","typeId","i","size"],"sources":["D:/.vscode/react-pizza-v2/src/components/PiazzaBlock/PizzaBlock.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addItem} from '../../redux/Slices/cart/slice';\r\nimport { CartItem} from '../../redux/Slices/cart/types';\r\nimport { selectCartItemById } from '../../redux/Slices/cart/selectors';\r\n\r\nexport type PizzaBlockProps = {\r\n  id: string;\r\n  title: string;\r\n  imageUrl: string;\r\n  price: number;\r\n  count: number;\r\n  types: number[];\r\n  sizes: number[];\r\n};\r\n\r\nconst typeName = ['тонкое', 'традиционное'];\r\n\r\nconst PizzaBlock: React.FC<PizzaBlockProps> = ({ id, price, title, imageUrl, types, sizes }) => {\r\n  const dispatch = useDispatch();\r\n  const cartItem = useSelector(selectCartItemById(id));\r\n  const [activeType, setActiveType] = React.useState(0);\r\n  const [activeSize, setActiveSize] = React.useState(0);\r\n  const addedCount = cartItem ? cartItem.count : 0;\r\n\r\n  const onClickAdd = () => {\r\n    const item: CartItem = {\r\n      id,\r\n      price,\r\n      title,\r\n      imageUrl,\r\n      types: typeName[activeType],\r\n      sizes: activeSize,\r\n      count: 0\r\n    };\r\n    dispatch(addItem(item));\r\n  };\r\n\r\n  return (\r\n    <div className=\"pizza-block-wrapper\">\r\n      <div className=\"pizza-block\">\r\n      <Link key={id} to={`/pizza/${id}`} >\r\n        <img className=\"pizza-block__image\" src={imageUrl} alt=\"Pizza\" />\r\n               <h4 className=\"pizza-block__title\">{title}</h4>\r\n               </Link>\r\n        <div className=\"pizza-block__selector\">\r\n          <ul>\r\n            {types.map((typeId, i) => (\r\n              <li\r\n                key={i}\r\n                onClick={() => setActiveType(typeId)}\r\n                className={activeType === typeId ? 'active' : ''}>\r\n                {typeName[typeId]}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <ul>\r\n            {sizes.map((size, i) => (\r\n              <li\r\n                key={i}\r\n                onClick={() => setActiveSize(size)}\r\n                className={activeSize === size ? 'active' : ''}>\r\n                {size} см.\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div className=\"pizza-block__bottom\">\r\n          <div className=\"pizza-block__price\">от {price} ₽</div>\r\n          <button onClick={onClickAdd} className=\"button button--outline button--add\">\r\n            <svg\r\n              width=\"12\"\r\n              height=\"12\"\r\n              viewBox=\"0 0 12 12\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path\r\n                d=\"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z\"\r\n                fill=\"white\"\r\n              />\r\n            </svg>\r\n            <span>Добавить</span>\r\n            {addedCount > 0 && <i>{addedCount}</i>}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PizzaBlock;\r\n"],"mappings":"+GAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,OAAT,KAAuB,+BAAvB,CAEA,OAASC,kBAAT,KAAmC,mCAAnC,C,wFAYA,GAAMC,SAAQ,CAAG,CAAC,QAAD,CAAW,cAAX,CAAjB,CAEA,GAAMC,WAAqC,CAAG,QAAxCA,WAAwC,MAAkD,IAA/CC,GAA+C,MAA/CA,EAA+C,CAA3CC,KAA2C,MAA3CA,KAA2C,CAApCC,KAAoC,MAApCA,KAAoC,CAA7BC,QAA6B,MAA7BA,QAA6B,CAAnBC,KAAmB,MAAnBA,KAAmB,CAAZC,KAAY,MAAZA,KAAY,CAC9F,GAAMC,SAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,SAAQ,CAAGZ,WAAW,CAACE,kBAAkB,CAACG,EAAD,CAAnB,CAA5B,CACA,oBAAoCR,KAAK,CAACgB,QAAN,CAAe,CAAf,CAApC,oDAAOC,UAAP,qBAAmBC,aAAnB,qBACA,qBAAoClB,KAAK,CAACgB,QAAN,CAAe,CAAf,CAApC,qDAAOG,UAAP,qBAAmBC,aAAnB,qBACA,GAAMC,WAAU,CAAGN,QAAQ,CAAGA,QAAQ,CAACO,KAAZ,CAAoB,CAA/C,CAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,GAAMC,KAAc,CAAG,CACrBhB,EAAE,CAAFA,EADqB,CAErBC,KAAK,CAALA,KAFqB,CAGrBC,KAAK,CAALA,KAHqB,CAIrBC,QAAQ,CAARA,QAJqB,CAKrBC,KAAK,CAAEN,QAAQ,CAACW,UAAD,CALM,CAMrBJ,KAAK,CAAEM,UANc,CAOrBG,KAAK,CAAE,CAPc,CAAvB,CASAR,QAAQ,CAACV,OAAO,CAACoB,IAAD,CAAR,CAAR,CACD,CAXD,CAaA,mBACE,YAAK,SAAS,CAAC,qBAAf,uBACE,aAAK,SAAS,CAAC,aAAf,wBACA,MAAC,IAAD,EAAe,EAAE,kBAAYhB,EAAZ,CAAjB,wBACE,YAAK,SAAS,CAAC,oBAAf,CAAoC,GAAG,CAAEG,QAAzC,CAAmD,GAAG,CAAC,OAAvD,EADF,cAES,WAAI,SAAS,CAAC,oBAAd,UAAoCD,KAApC,EAFT,GAAWF,EAAX,CADA,cAKE,aAAK,SAAS,CAAC,uBAAf,wBACE,oBACGI,KAAK,CAACa,GAAN,CAAU,SAACC,MAAD,CAASC,CAAT,qBACT,WAEE,OAAO,CAAE,yBAAMT,cAAa,CAACQ,MAAD,CAAnB,EAFX,CAGE,SAAS,CAAET,UAAU,GAAKS,MAAf,CAAwB,QAAxB,CAAmC,EAHhD,UAIGpB,QAAQ,CAACoB,MAAD,CAJX,EACOC,CADP,CADS,EAAV,CADH,EADF,cAWE,oBACGd,KAAK,CAACY,GAAN,CAAU,SAACG,IAAD,CAAOD,CAAP,qBACT,YAEE,OAAO,CAAE,yBAAMP,cAAa,CAACQ,IAAD,CAAnB,EAFX,CAGE,SAAS,CAAET,UAAU,GAAKS,IAAf,CAAsB,QAAtB,CAAiC,EAH9C,WAIGA,IAJH,oBACOD,CADP,CADS,EAAV,CADH,EAXF,GALF,cA2BE,aAAK,SAAS,CAAC,qBAAf,wBACE,aAAK,SAAS,CAAC,oBAAf,2BAAwClB,KAAxC,aADF,cAEE,gBAAQ,OAAO,CAAEc,UAAjB,CAA6B,SAAS,CAAC,oCAAvC,wBACE,YACE,KAAK,CAAC,IADR,CAEE,MAAM,CAAC,IAFT,CAGE,OAAO,CAAC,WAHV,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAC,4BALR,uBAME,aACE,CAAC,CAAC,0QADJ,CAEE,IAAI,CAAC,OAFP,EANF,EADF,cAYE,0EAZF,CAaGF,UAAU,CAAG,CAAb,eAAkB,mBAAIA,UAAJ,EAbrB,GAFF,GA3BF,GADF,EADF,CAkDD,CAtED,CAwEA,cAAed,WAAf"},"metadata":{},"sourceType":"module"}